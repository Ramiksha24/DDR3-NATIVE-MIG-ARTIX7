# DDR3 Native MIG Controller on Artix-7 FPGA

This repository contains a **DDR3 SDRAM controller implementation using Xilinx MIG in Native User Interface mode** on an **Artix-7 FPGA (XC7A50T)**.  
The design allows **interactive write‚Äìread‚Äìcompare memory testing** using **VIO (Virtual Input/Output)** for real-time control and observation.

Unlike AXI-based designs, this project directly interfaces with the **MIG Native UI**, providing deeper insight into DDR3 command, data, and timing behavior.

---

##  Key Features

- DDR3 controller using **MIG Native Interface (no AXI)**
- Custom **FSM-based memory test controller**
- Interactive **VIO-controlled write and read operations**
- Proper **debug clock separation** (free-running fabric clock vs DDR UI clock)
- Read data comparison with error counting
- Designed for **learning, debugging, and silicon-level understanding**

---

## Design Architecture

The system is composed of three main blocks:

1. **MIG DDR3 Controller (Native UI)**
   - Handles DDR3 PHY, calibration, timing, refresh, and command scheduling
   - Generates `ui_clk` for user logic
   - Exposes `app_*` native interface signals

2. **Native DDR3 Controller FSM**
   - Issues write and read commands through MIG Native UI
   - Performs the sequence:
     ```
     WRITE ‚Üí WAIT ‚Üí READ ‚Üí COMPARE
     ```
   - Captures read data and checks correctness
   - Tracks test completion and error count

3. **VIO-Based Debug Interface**
   - Provides real-time control of:
     - Start signal
     - Write address
     - Write data
     - Read address
   - Displays:
     - Calibration status
     - Test completion
     - Data match result
     - Read data
     - Error count

---

## ‚è±Ô∏è Clocking Strategy (Important Design Choice)

| Block | Clock |
|-----|------|
| MIG system clock | Buffered board clock (200 MHz) |
| MIG user interface | `ui_clk` (generated by MIG) |
| DDR controller FSM | `ui_clk` |
| VIO / debug hub | Free-running fabric clock |

**Why this matters:**
- `ui_clk` is not free-running during DDR calibration
- Debug cores (VIO/ILA) require an always-on clock
- Separating debug and DDR clocks ensures stable JTAG access without affecting DDR timing

---

##  FSM Operation

The controller FSM transitions through the following states:

1. **IDLE** ‚Äì Wait for start signal
2. **WAIT_CALIB** ‚Äì Wait for MIG calibration to complete
3. **WRITE_CMD** ‚Äì Issue write command
4. **WRITE_DATA** ‚Äì Send write data
5. **WRITE_WAIT** ‚Äì Allow write to complete
6. **READ_CMD** ‚Äì Issue read command
7. **READ_WAIT** ‚Äì Wait for read data
8. **COMPARE** ‚Äì Compare read data with written data
9. **DONE** ‚Äì Signal test completion

---

##  Example Test Output

output.png
Using VIO, the following was observed:

- `init_calib_complete = 1` ‚Üí DDR3 successfully calibrated
- `test_done = 1` ‚Üí Write‚Äìread test completed
- `data_match = 1` ‚Üí Read data matched written data
- `error_count = 0` ‚Üí No memory errors detected
- `read_data_captured` matched `vio_write_data`

This confirms **correct DDR3 operation and data integrity**.

---

## üõ† Tools & Platform

- **FPGA**: Artix-7 (XC7A50T)
- **Memory**: DDR3 SDRAM (MT41K128M16)
- **Toolchain**: Xilinx Vivado
- **Debug**: VIO, ILA
- **Language**: Verilog HDL

---



